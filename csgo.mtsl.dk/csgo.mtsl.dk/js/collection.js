import{items as e}from"/data/items.js?v=2.19";import{game as t}from"/js/game.js?v=2.19";import{numToValuta as o,showPage as i,user as n}from"/script.js?v=2.19";import{getItem as s,getItemContainer as c}from"/js/items.js?v=2.19";import{Pages as l}from"/js/pages.js?v=2.19";import r from"/js/select.js?v=2.19";const a=l.createPage("collection");a.q("h1",{text:"Collection Book"});a.q("p.subtitle",{text:"This is your collection book. Here you can see all of the skins and stickers in the game you have had in your inventory at least once."});const p=a.q(".collection-page-controls");p.q("vertical-switch",{text:"Overview",onchange(){v=this.state==="on";k(0,true)},startState:false});const u=p.q("input.input",{placeholder:"Search...",oninput(){d=this.value.trim().toLowerCase().replace(/[ |()-]/g,"");k(0,true)}});p.q("button.button","< prev",{onclick(){k(g-1,true)}});const m=p.q("input.num-input",{value:1,oninput(){k(parseInt(this.value)-1)},onfocus(){m.value=g+1;this.select()},onblur(){k(g,true)}});p.q("button.button","Next >",{onclick(){k(g+1,true)}});const h=p.q("p","Loading...");const f=a.q(".collection-page-container");let g=0;let d="";let v=false;function k(t=g,l){n.discoveredItems??=[];f.innerHTML="";let a=Object.values(e).filter((e=>(e.masterItem||e.type==="sticker")&&e.name.toLowerCase().replace(/[ |()-]/g,"").includes(d))).sort(((e,t)=>t.price-e.price));h.innerText=`You have discovered ${n.discoveredItems.filter((e=>{const t=s(e);return e.toLowerCase().replace(/[ |()-]/g,"").includes(d)&&t.type==="skin"})).length}/${a.length} skins & stickers!`;let p=v?Math.floor(r("#pages").offsetHeight/150)*Math.floor(r("#pages").offsetWidth/120):Math.floor(r("#pages").offsetHeight/328)*Math.floor(r("#pages").offsetWidth/240);t=Math.round(t);if(t<0)t=0;if(p*t>=a.length)t=Math.ceil(a.length/p)-1;g=t;if(l)m.value=g+1+" / "+Math.ceil(a.length/p);for(let e=p*g;e<Math.min(p*(g+1),a.length);e++){let t=a[e];let s=n.discoveredItems.includes(a[e].name);let l=!s&&!v&&c(t.name,true,3);f.q(".collection-item",{classes:[s&&"collection-item-discovered",v&&"collection-item-compact"],onclick(){if(s)i("inspect$"+t.name)},children:[q(".collection-item-image",{style:{backgroundImage:"url("+t.src+")"}}),q(".collection-item-info",{children:[q(".citem-weapon",t.weapon||t.stickerType),q(".citem-skin",s?t.skin||t.sticker:v?(t.weapon||t.stickerType)+" | ????":"????"),q(".citem-price",v?"":s?o(t.price,2):!l?"Unobtainable from cases":"Found in "+l.splice(0,2).join(l.length>0?", ":" and ")+(l.length>0?" and others...":""))]})]})}}t.on("showPage",(e=>{if(e.page==="collection"){k();u.focus()}}));