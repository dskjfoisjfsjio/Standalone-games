import{numToValuta as e,user as t}from"/script.js?v=2.19";import{addStat as a}from"/js/stats.js?v=2.19";import c from"/js/select.js?v=2.19";import{game as s}from"/js/game.js?v=2.19";import{Pages as i}from"/js/pages.js?v=2.19";import{getCurrency as o}from"/js/prefs.js?v=2.19";const n=i.createPage("click");n.classList.add("center-v");n.q(".clickbtn",o());n.q(".click-how2-text","Click to earn money");const l=n.q(".click-how2-text").q("span",e(0,2)+"/s");const r=n.q(".click-ce-list");let f=1;function p(e,a){f*=e;let c=Math.ceil(a*t.upgrades.clickEffectsDuration);setTimeout((()=>{f/=e;r.removeChild(s);clearInterval(i)}),c*1e3);let s=r.q(".click-ce-list-item");s.innerText=`${e}X Money - ${c} seconds...`;const i=setInterval((()=>{c-=1;s.innerText=`${e}X Money - ${c} seconds...`}),1e3)}let d={"2x":{icon:"/images/2x-ce.png",name:"2X",description:"2X Money",activate(){p(2,10)}},"4x":{icon:"/images/4x-ce.png",name:"4X",description:"4X Money",activate(){p(4,8)}},"7x":{icon:"/images/7x-ce.png",name:"7X",description:"7X Money",activate(){p(7,5)}},cashbag:{icon:"/images/cb-ce.png",name:"Cash Bag",description:"Cashbag",activate(e){let a=Math.ceil(t.upgrades.perClick*200*t.upgrades.effectCashBag);y(e.pageX||e.changedTouches?.[0]?.pageX,e.pageY||e.changedTouches?.[0]?.pageY,"%b","money",a)}}};function m(){a("click_effects_summoned");let e=["2x"];if(t.upgrades.unlockClickEffect4x)e.push("4x");if(t.upgrades.unlockClickEffect7x)e.push("7x");if(t.upgrades.effectCashBag)e.push("cashbag");let c=e[Math.floor(Math.random()*e.length)];const s=d[c];a("click_effects_summoned_"+c);let i=Math.ceil(8*t.upgrades.clickEffectsDecay);let o=false;let l=n.q(".ce-activator-container",{style:{left:Math.random()*(n.offsetWidth-80)+"px",top:Math.random()*(n.offsetHeight-80)+"px",animation:"decay "+i+"s linear forwards"}}).q(".ce-activator",{style:{backgroundImage:`url(${s.icon})`},onclick(e){if(o)return;o=true;s.activate(e);l.parentNode.classList.add("ce-activated");setTimeout((()=>{n.removeChild(l.parentNode);l=false}),500);a("click_effects_activated");a("click_effects_activated_"+c)}});setTimeout((()=>{if(l&&!o){n.removeChild(l.parentNode);a("click_effects_decayed");a("click_effects_decayed_"+c)}}),i*1e3)}let g=0;function u(){if(Date.now()>g){g=Date.now()+100;return true}return false}let h=[];function x(c){if(c){let s=Date.now()-2e3;for(let e=h.length-1;e>=0;e--){if(h[e]<s)h.splice(e,1)}h.push(Date.now());let i=h.length/2;if(t.upgrades.unlockClickEffect2x&&Math.random()<1/250*t.upgrades.clickEffectsChance&&u()&&i<24)m();let o=t.upgrades.perClick+t.upgrades.perClick*(Math.random()*.2-.1);o*=f;let n=Math.round(Math.random()*6+1)*f*t.upgrades.xpmul;if(i>=24){o=0;n=0;l.innerHTML=`You are clicking too fast!`}else l.innerHTML=`${e(t.upgrades.perClick*f*i,2)}/s`;a("earned_cash",o);a("earnings_from_clicks",o);a("earned_xp",n);a("xp_from_clicks",n);y(c.pageX||c.changedTouches?.[0]?.pageX,c.pageY||c.changedTouches?.[0]?.pageY,"%b","money",o);y(c.pageX||c.changedTouches?.[0]?.pageX,c.pageY||c.changedTouches?.[0]?.pageY,"%a xp","xp",n);a("clicks")}}function y(a,i,o,n,l){let r=document.body.q(".floating-text",`+ ${o.replace(/%a/g,l.toFixed(0)).replace(/%b/g,e(l,2))}`);a=a-r.offsetWidth/2;i=i-r.offsetHeight;r.style.left=a+"px";r.style.top=i+"px";setTimeout((()=>{r.style.left=a+Math.random()*60-30+"px";r.style.top=i-Math.random()*100-40+"px"}),50);setTimeout((()=>r.style.opacity="0"),400);setTimeout((()=>document.body.removeChild(r)),500);setTimeout((()=>{if(n==="money"){c("#money").style.transition=0+"s";c("#money").style.fontSize=48+"px"}else if(n==="xp"){c("#level-bar-p").style.transition=0+"s";c("#level-bar-p").style.boxShadow="0 3px #ffff inset"}setTimeout((()=>{if(n==="money"){t.money+=l;c("#money").style.transition=.4+"s";c("#money").style.fontSize=24+"px"}else if(n==="xp"){t.xp+=l;c("#level-bar-p").style.transition=.4+"s";c("#level-bar-p").style.boxShadow="0 3px #fff0 inset"}s.emit("update")}),20)}),500)}let k=false;n.addEventListener("touchstart",(e=>{k=true;x(e)}));n.addEventListener("mousedown",(e=>{if(e.target.classList.contains("ce-activator"))return;if(!k)x(e);k=false}));