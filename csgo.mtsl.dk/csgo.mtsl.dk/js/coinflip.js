import{showPage as t,user as i}from"/script.js?v=2.19";import{pageBGNotification as o}from"/js/notifications.js?v=2.19";import{giveItemsWorth as s,removeItemsFromInventory as e,selectItems as l}from"/js/items.js?v=2.19";import{addStat as n}from"/js/stats.js?v=2.19";import{Pages as c}from"/js/pages.js?v=2.19";import{global as a}from"/script.js?v=2.19";const f=c.createPage("coinflip");const p=f.q("#coinflip-status");const r=f.q("#coinflip-ct");const _=f.q("#coinflip-t");const m=f.q(".coinflip-perspective").q("#coinflip-coin");m.q(".coinflip-face-ct");m.q(".coinflip-face-t");export async function openCoinflip(){let c=await l(250,i.upgrades.maxbet);let f=0;c.forEach((t=>f+=t.price));p.innerText="Choose.";m.style.transition="0s";m.style.transform=`rotateY(0deg)`;m.classList.add("hide");r.classList.remove("hide");_.classList.remove("hide");t("coinflip",true);function d(t){a.noSpoilers=true;let i=Math.round(Math.random())===t;n("total_bets",1);n("total_coinflips",1);if(i){if(f>1e4)n("total_coinflips_won_bet100",1);if(f>1e5)n("total_coinflips_won_bet1000",1);if(f>1e6)n("total_coinflips_won_bet10000",1);n("total_bets_won",1);n("total_coinflips_won",1)}else{if(f>1e4)n("total_coinflips_lost_bet100",1);if(f>1e5)n("total_coinflips_lost_bet1000",1);if(f>1e6)n("total_coinflips_lost_bet10000",1);n("total_bets_lost",1);n("total_coinflips_lost",1);e(c.map((t=>{n("total_coinflips_losses",t.price);return t.name})))}r.classList.add("hide");_.classList.add("hide");m.classList.remove("hide");p.classList.add("hide");setTimeout((()=>{m.style.transition="4s";m.style.transform=`rotateY(${180*Math.ceil(8+(i?t:t+1))}deg)`;setTimeout((()=>{p.innerText=i?"You Won!":"You lost!";if(i)o({message:"You won the coinflip, your winnings will show up shortly!",icon:"coinflip_ct"},"coinflip");else o({message:"You lost the coinflip!",icon:"coinflip_ct"},"coinflip");p.classList.remove("hide");setTimeout((()=>{if(i)s(f);a.noSpoilers=false}),1500)}),4200)}),100)}r.onclick=()=>d(0);_.onclick=()=>d(1)}